create or replace PROCEDURE UPDATE_PAYOUT_PROCESSED_STATUS (
PAYOUTNO IN VARCHAR2, --1. change in/out params
PSTATUS IN VARCHAR2, 
PMESSAGE IN VARCHAR2, 
MODIFIEDBY IN VARCHAR2,
OUT_STATUS OUT NOCOPY VARCHAR2,
OUT_ERROR_CODE OUT NOCOPY VARCHAR2,
OUT_ERROR_MESSAGE OUT NOCOPY VARCHAR2) IS
PAYOUTID NUMBER;
BEGIN
--2. check if onboard number exists 
--3. onboard & journal number exists in payout_response table
--4. check if status already not update
    SELECT PAYOUT_ID INTO PAYOUTID FROM TEMP_PAYOUT WHERE PAYOUT_NO = PAYOUTNO;
    
    UPDATE PAYOUT_STORED_PROCEDURE_RESPONSE SET PROCESSED_STATUS = PSTATUS, PROCESSED_MESSAGE = PMESSAGE,
            MODIFIED_BY = MODIFIEDBY, MODIFIED_ON = CURRENT_TIMESTAMP WHERE PAYOUT_ID = PAYOUTID;
    COMMIT;
    OUT_STATUS:='OK';
    EXCEPTION
        WHEN OTHERS THEN
            OUT_STATUS:='NOT OK';
            OUT_ERROR_CODE:=SQLCODE;
            OUT_ERROR_MESSAGE:=DBMS_UTILITY.format_error_stack||' '||DBMS_UTILITY.format_error_backtrace;
            ROLLBACK;
END UPDATE_PAYOUT_PROCESSED_STATUS;